/* 
 * TTBlue Base Class
 * Jamoma's lowest-level base class and related infrastructure
 * 
 * License: This code is licensed under the terms of the "New BSD License"
 * http://creativecommons.org/licenses/BSD/
 */

#include "TTBase.h"
#include "TTEnvironment.h"


const TTFloat64 kTTPi = 3.141592653589793238462643383279502884197169399375105820974944592307816406286208998628034825342117068;
const TTFloat64 kTTTwoPi = kTTPi * 2.0;
const TTFloat64 kTTAntiDenormalValue = 1e-18;
const TTFloat64	kTTSqrt2 = sqrt(2.0); 
const TTFloat64 kTTHalfPi  = kTTPi / 2.0;
const TTFloat64 kTTEpsilon = 1E-21;

const TTFloat32 kTTLookupEqualPower[] = {			// 512 point equal-power table
	1.0F,				0.999995275372036F,	0.999981101532787F,	0.999957478616186F,	0.999924406845452F,	0.999881886533088F,	0.999829918080880F,	
	0.999768501979891F,	0.999697638810457F,	0.999617329242183F,	0.999527574033934F,	0.999428374033830F,	0.999319730179238F,	0.999201643496761F,	
	0.999074115102230F,	0.998937146200694F,	0.998790738086406F,	0.998634892142816F,	0.998469609842550F,	0.998294892747404F,	0.998110742508323F,	
	0.997917160865392F,	0.997714149647812F,	0.997501710773889F,	0.997279846251011F,	0.997048558175634F,	0.996807848733257F,	0.996557720198405F,	
	0.996298174934608F,	0.996029215394374F,	0.995750844119172F,	0.995463063739403F,	0.995165876974377F,	0.994859286632287F,	0.994543295610186F,	
	0.994217906893952F,	0.993883123558267F,	0.993538948766584F,	0.993185385771100F,	0.992822437912720F,	0.992450108621033F,	0.992068401414273F,	
	0.991677319899290F,	0.991276867771512F,	0.990867048814915F,	0.990447866901982F,	0.990019325993670F,	0.989581430139373F,	0.989134183476881F,	
	0.988677590232340F,	0.988211654720219F,	0.987736381343261F,	0.987251774592445F,	0.986757839046946F,	0.986254579374085F,	0.985742000329293F,	
	0.985220106756061F,	0.984688903585893F,	0.984148395838266F,	0.983598588620574F,	0.983039487128088F,	0.982471096643900F,	0.981893422538877F,	
	0.981306470271609F,	0.980710245388360F,	0.980104753523010F,	0.979490000397008F,	0.978865991819312F,	0.978232733686339F,	0.977590231981908F,	
	0.976938492777182F,	0.976277522230611F,	0.975607326587875F,	0.974927912181824F,	0.974239285432419F,	0.973541452846670F,	0.972834421018576F,	
	0.972118196629061F,	0.971392786445914F,	0.970658197323721F,	0.969914436203801F,	0.969161510114145F,	0.968399426169344F,	0.967628191570524F,	
	0.966847813605278F,	0.966058299647597F,	0.965259657157800F,	0.964451893682466F,	0.963635016854357F,	0.962809034392352F,	0.961973954101371F,	
	0.961129783872301F,	0.960276531681922F,	0.959414205592833F,	0.958542813753374F,	0.957662364397550F,	0.956772865844950F,	0.955874326500676F,	
	0.954966754855255F,	0.954050159484564F,	0.953124549049748F,	0.952189932297135F,	0.951246318058160F,	0.950293715249274F,	0.949332132871865F,	
	0.948361580012172F,	0.947382065841196F,	0.946393599614617F,	0.945396190672707F,	0.944389848440237F,	0.943374582426393F,	0.942350402224682F,	
	0.941317317512847F,	0.940275338052769F,	0.939224473690377F,	0.938164734355560F,	0.937096130062064F,	0.936018670907405F,	0.934932367072772F,	
	0.933837228822925F,	0.932733266506108F,	0.931620490553943F,	0.930498911481333F,	0.929368539886368F,	0.928229386450218F,	0.927081461937034F,	
	0.925924777193850F,	0.924759343150475F,	0.923585170819395F,	0.922402271295664F,	0.921210655756802F,	0.920010335462689F,	0.918801321755460F,	
	0.917583626059394F,	0.916357259880809F,	0.915122234807954F,	0.913878562510896F,	0.912626254741413F,	0.911365323332881F,	0.910095780200166F,	
	0.908817637339503F,	0.907530906828393F,	0.906235600825481F,	0.904931731570445F,	0.903619311383879F,	0.902298352667178F,	0.900968867902419F,	
	0.899630869652243F,	0.898284370559739F,	0.896929383348320F,	0.895565920821609F,	0.894193995863310F,	0.892813621437095F,	0.891424810586474F,	
	0.890027576434677F,	0.888621932184526F,	0.887207891118315F,	0.885785466597678F,	0.884354672063469F,	0.882915521035633F,	0.881468027113075F,	
	0.880012203973536F,	0.878548065373461F,	0.877075625147871F,	0.875594897210229F,	0.874105895552315F,	0.872608634244084F,	0.871103127433543F,	
	0.869589389346611F,	0.868067434286986F,	0.866537276636011F,	0.864998930852537F,	0.863452411472788F,	0.861897733110220F,	0.860334910455388F,	
	0.858763958275803F,	0.857184891415794F,	0.855597724796367F,	0.854002473415067F,	0.852399152345832F,	0.850787776738853F,	0.849168361820431F,	
	0.847540922892831F,	0.845905475334141F,	0.844262034598123F,	0.842610616214069F,	0.840951235786655F,	0.839283908995790F,	0.837608651596472F,	
	0.835925479418637F,	0.834234408367010F,	0.832535454420953F,	0.830828633634319F,	0.829113962135292F,	0.827391456126242F,	0.825661131883571F,	
	0.823923005757554F,	0.822177094172191F,	0.820423413625045F,	0.818661980687095F,	0.816892812002570F,	0.815115924288798F,	0.813331334336046F,	
	0.811539059007361F,	0.809739115238412F,	0.807931520037327F,	0.806116290484536F,	0.804293443732608F,	0.802462997006089F,	0.800624967601338F,	
	0.798779372886365F,	0.796926230300667F,	0.795065557355063F,	0.793197371631527F,	0.791321690783025F,	0.789438532533345F,	0.787547914676930F,	
	0.785649855078714F,	0.783744371673947F,	0.781831482468030F,	0.779911205536341F,	0.777983559024070F,	0.776048561146041F,	0.774106230186545F,	
	0.772156584499164F,	0.770199642506599F,	0.768235422700496F,	0.766263943641270F,	0.764285223957932F,	0.762299282347910F,	0.760306137576876F,	
	0.758305808478563F,	0.756298313954593F,	0.754283672974297F,	0.752261904574531F,	0.750233027859504F,	0.748197062000591F,	0.746154026236154F,	
	0.744103939871361F,	0.742046822278002F,	0.739982692894309F,	0.737911571224767F,	0.735833476839937F,	0.733748429376263F,	0.731656448535892F,	
	0.729557554086488F,	0.727451765861040F,	0.725339103757681F,	0.723219587739495F,	0.721093237834332F,	0.718960074134617F,	0.716820116797158F,	
	0.714673386042961F,	0.712519902157034F,	0.710359685488197F,	0.708192756448891F,	0.706019135514982F,	0.703838843225571F,	0.701651900182798F,	
	0.699458327051647F,	0.697258144559753F,	0.695051373497202F,	0.692838034716339F,	0.690618149131570F,	0.688391737719160F,	0.686158821517041F,	
	0.683919421624611F,	0.681673559202530F,	0.679421255472529F,	0.677162531717202F,	0.674897409279807F,	0.672625909564066F,	0.670348054033962F,	
	0.668063864213534F,	0.665773361686676F,	0.663476568096933F,	0.661173505147295F,	0.658864194599994F,	0.656548658276296F,	0.654226918056296F,	
	0.651898995878713F,	0.649564913740677F,	0.647224693697529F,	0.644878357862608F,	0.642525928407040F,	0.640167427559533F,	0.637802877606167F,	
	0.635432300890177F,	0.633055719811752F,	0.630673156827813F,	0.628284634451807F,	0.625890175253495F,	0.623489801858734F,	0.621083536949265F,	
	0.618671403262503F,	0.616253423591316F,	0.613829620783813F,	0.611400017743126F,	0.608964637427197F,	0.606523502848557F,	0.604076637074112F,	
	0.601624063224923F,	0.599165804475987F,	0.596701884056021F,	0.594232325247240F,	0.591757151385137F,	0.589276385858262F,	0.586790052108005F,	
	0.584298173628368F,	0.581800773965751F,	0.579297876718721F,	0.576789505537795F,	0.574275684125214F,	0.571756436234720F,	0.569231785671332F,	
	0.566701756291118F,	0.564166372000973F,	0.561625656758393F,	0.559079634571246F,	0.556528329497548F,	0.553971765645233F,	0.551409967171927F,	
	0.548842958284719F,	0.546270763239934F,	0.543693406342901F,	0.541110911947725F,	0.538523304457056F,	0.535930608321859F,	0.533332848041184F,	
	0.530730048161933F,	0.528122233278629F,	0.525509428033180F,	0.522891657114652F,	0.520268945259034F,	0.517641317249000F,	0.515008797913680F,	
	0.512371412128424F,	0.509729184814563F,	0.507082140939181F,	0.504430305514873F,	0.501773703599509F,	0.499112360296002F,	0.496446300752065F,	
	0.493775550159977F,	0.491100133756345F,	0.488420076821862F,	0.485735404681073F,	0.483046142702131F,	0.480352316296562F,	0.477653950919020F,	
	0.474951072067050F,	0.472243705280847F,	0.469531876143012F,	0.466815610278313F,	0.464094933353440F,	0.461369871076767F,	0.458640449198105F,	
	0.455906693508459F,	0.453168629839786F,	0.450426284064751F,	0.447679682096481F,	0.444928849888321F,	0.442173813433588F,	0.439414598765327F,	
	0.436651231956064F,	0.433883739117558F,	0.431112146400558F,	0.428336479994553F,	0.425556766127525F,	0.422773031065701F,	0.419985301113307F,	
	0.417193602612317F,	0.414397961942204F,	0.411598405519692F,	0.408794959798506F,	0.405987651269123F,	0.403176506458519F,	0.400361551929922F,	
	0.397542814282556F,	0.394720320151395F,	0.391894096206909F,	0.389064169154812F,	0.386230565735806F,	0.383393312725338F,	0.380552436933337F,	
	0.377707965203965F,	0.374859924415363F,	0.372008341479398F,	0.369153243341407F,	0.366294656979943F,	0.363432609406519F,	0.360567127665357F,	
	0.357698238833126F,	0.354825970018690F,	0.351950348362854F,	0.349071401038102F,	0.346189155248344F,	0.343303638228659F,	0.340414877245035F,	
	0.337522899594113F,	0.334627732602932F,	0.331729403628665F,	0.328827940058363F,	0.325923369308699F,	0.323015718825706F,	0.320105016084517F,	
	0.317191288589106F,	0.314274563872031F,	0.311354869494171F,	0.308432233044464F,	0.305506682139650F,	0.302578244424009F,	0.299646947569098F,	
	0.296712819273490F,	0.293775887262517F,	0.290836179287999F,	0.287893723127989F,	0.284948546586509F,	0.282000677493286F,	0.279050143703490F,	
	0.276096973097469F,	0.273141193580488F,	0.270182833082464F,	0.267221919557703F,	0.264258480984633F,	0.261292545365546F,	0.258324140726326F,	
	0.255353295116187F,	0.252380036607411F,	0.249404393295077F,	0.246426393296801F,	0.243446064752468F,	0.240463435823963F,	0.237478534694912F,	
	0.234491389570410F,	0.231502028676754F,	0.228510480261181F,	0.225516772591598F,	0.222520933956314F,	0.219522992663777F,	0.216522977042298F,	
	0.213520915439796F,	0.210516836223518F,	0.207510767779776F,	0.204502738513682F,	0.201492776848874F,	0.198480911227249F,	0.195467170108698F,	
	0.192451581970830F,	0.189434175308710F,	0.186414978634587F,	0.183394020477621F,	0.180371329383620F,	0.177346933914765F,	0.174320862649344F,	
	0.171293144181478F,	0.168263807120853F,	0.165232880092452F,	0.162200391736279F,	0.159166370707092F,	0.156130845674133F,	0.153093845320856F,	
	0.150055398344653F,	0.147015533456587F,	0.143974279381120F,	0.140931664855841F,	0.137887718631191F,	0.134842469470199F,	0.131795946148203F,	
	0.128748177452581F,	0.125699192182480F,	0.122649019148542F,	0.119597687172633F,	0.116545225087569F,	0.113491661736846F,	0.110437025974366F,	
	0.107381346664163F,	0.104324652680134F,	0.101266972905762F,	0.0982083362338450F,0.0951487715662253F,0.0920883078135118F,0.0890269738948095F,	
	0.0859647987374465F,	0.0829018112766992F,	0.0798380404555206F,	0.0767735152242645F,	0.0737082645404147F,	0.0706423173683090F,	
	0.0675757026788675F,	0.0645084494493164F,	0.0614405866629168F,	0.0583721433086900F,	0.0553031483811415F,	0.0522336308799904F,	
	0.0491636198098929F,	0.0460931441801699F,	0.0430222330045305F,	0.0399509153008011F,	0.0368792200906482F,	0.0338071763993066F,	
	0.0307348132553026F,	0.0276621596901821F,	0.0245892447382355F,	0.0215160974362223F,	0.0184427468230977F,	0.0153692219397382F,	
	0.0122955518286674F,	0.00922176553378061F,	0.00614789210007114F,	0.00307396057335558F,	0.0F
};	

const TTFloat32 kTTLookupSquareRoot[] = {			// 512 point square root (sqrt(1)... sqrt(0)) table
	1.0F,  				  0.999021047244538F,   0.998041134260080F,   0.997060258215480F,   0.996078416265654F,   0.995095605551480F,   0.994111823199704F,   
	0.993127066322842F,   0.992141332019076F,   0.991154617372164F,   0.990166919451329F,   0.989178235311163F,   0.988188561991526F,   0.987197896517438F,   
	0.986206235898976F,   0.985213577131173F,   0.984219917193903F,   0.983225253051786F,   0.982229581654066F,   0.981232899934513F,   0.980235204811308F,   
	0.979236493186932F,   0.978236761948054F,   0.977236007965419F,   0.976234228093730F,   0.975231419171539F,   0.974227578021126F,   0.973222701448379F,   
	0.972216786242685F,   0.971209829176800F,   0.970201827006732F,   0.969192776471624F,   0.968182674293621F,   0.967171517177756F,   0.966159301811816F,   
	0.965146024866221F,   0.964131682993896F,   0.963116272830137F,   0.962099790992488F,   0.961082234080602F,   0.960063598676117F,   0.959043881342511F,   
	0.958023078624979F,   0.957001187050286F,   0.955978203126635F,   0.954954123343526F,   0.953928944171617F,   0.952902662062579F,   0.951875273448955F,   
	0.950846774744015F,   0.949817162341611F,   0.948786432616025F,   0.947754581921827F,   0.946721606593717F,   0.945687502946382F,   0.944652267274332F,   
	0.943615895851755F,   0.942578384932353F,   0.941539730749190F,   0.940499929514527F,   0.939458977419665F,   0.938416870634782F,   0.937373605308764F,   
	0.936329177569044F,   0.935283583521435F,   0.934236819249953F,   0.933188880816656F,   0.932139764261464F,   0.931089465601985F,   0.930037980833344F,   
	0.928985305927999F,   0.927931436835562F,   0.926876369482621F,   0.925820099772552F,   0.924762623585334F,   0.923703936777366F,   0.922644035181270F,   
	0.921582914605708F,   0.920520570835179F,   0.919456999629835F,   0.918392196725272F,   0.917326157832341F,   0.916258878636937F,   0.915190354799804F,   
	0.914120581956322F,   0.913049555716303F,   0.911977271663780F,   0.910903725356793F,   0.909828912327179F,   0.908752828080349F,   0.907675468095070F,   
	0.906596827823249F,   0.905516902689702F,   0.904435688091931F,   0.903353179399895F,   0.902269371955777F,   0.901184261073752F,   0.900097842039752F,   
	0.899010110111222F,   0.897921060516884F,   0.896830688456488F,   0.895738989100571F,   0.894645957590200F,   0.893551589036726F,   0.892455878521528F,   
	0.891358821095750F,   0.890260411780047F,   0.889160645564317F,   0.888059517407435F,   0.886957022236985F,   0.885853154948986F,   0.884747910407618F,   
	0.883641283444939F,   0.882533268860609F,   0.881423861421601F,   0.880313055861913F,   0.879200846882277F,   0.878087229149864F,   0.876972197297987F,   
	0.875855745925796F,   0.874737869597976F,   0.873618562844437F,   0.872497820160001F,   0.871375636004087F,   0.870252004800391F,   0.869126920936565F,   
	0.868000378763884F,   0.866872372596924F,   0.865742896713218F,   0.864611945352924F,   0.863479512718478F,   0.862345592974252F,   0.861210180246197F,   
	0.860073268621494F,   0.858934852148190F,   0.857794924834839F,   0.856653480650129F,   0.855510513522513F,   0.854366017339833F,   0.853219985948935F,   
	0.852072413155287F,   0.850923292722586F,   0.849772618372363F,   0.848620383783582F,   0.847466582592239F,   0.846311208390945F,   0.845154254728517F,   
	0.843995715109554F,   0.842835582994015F,   0.841673851796784F,   0.840510514887237F,   0.839345565588799F,   0.838178997178499F,   0.837010802886515F,   
	0.835840975895715F,   0.834669509341197F,   0.833496396309815F,   0.832321629839704F,   0.831145202919800F,   0.829967108489348F,   0.828787339437411F,   
	0.827605888602368F,   0.826422748771407F,   0.825237912680011F,   0.824051373011438F,   0.822863122396191F,   0.821673153411490F,   0.820481458580726F,   
	0.819288030372914F,   0.818092861202139F,   0.816895943426992F,   0.815697269350002F,   0.814496831217054F,   0.813294621216811F,   0.812090631480113F,   
	0.810884854079383F,   0.809677281028013F,   0.808467904279749F,   0.807256715728066F,   0.806043707205531F,   0.804828870483166F,   0.803612197269792F,   
	0.802393679211368F,   0.801173307890328F,   0.799951074824894F,   0.798726971468396F,   0.797500989208571F,   0.796273119366856F,   0.795043353197671F,   
	0.793811681887694F,   0.792578096555124F,   0.791342588248931F,   0.790105147948101F,   0.788865766560867F,   0.787624434923928F,   0.786381143801662F,   
	0.785135883885321F,   0.783888645792218F,   0.782639420064905F,   0.781388197170333F,   0.780134967499007F,   0.778879721364121F,   0.777622449000686F,   
	0.776363140564644F,   0.775101786131970F,   0.773838375697758F,   0.772572899175293F,   0.771305346395117F,   0.770035707104069F,   0.768763970964325F,   
	0.767490127552408F,   0.766214166358195F,   0.764936076783909F,   0.763655848143083F,   0.762373469659526F,   0.761088930466262F,   0.759802219604452F,   
	0.758513326022308F,   0.757222238573986F,   0.755928946018454F,   0.754633437018361F,   0.753335700138868F,   0.752035723846475F,   0.750733496507825F,   
	0.749429006388489F,   0.748122241651732F,   0.746813190357257F,   0.745501840459940F,   0.744188179808529F,   0.742872196144334F,   0.741553877099890F,   
	0.740233210197605F,   0.738910182848379F,   0.737584782350205F,   0.736256995886744F,   0.734926810525882F,   0.733594213218261F,   0.732259190795781F,   
	0.730921729970088F,   0.729581817331024F,   0.728239439345064F,   0.726894582353718F,   0.725547232571911F,   0.724197376086335F,   0.722844998853770F,   
	0.721490086699380F,   0.720132625314985F,   0.718772600257290F,   0.717409996946098F,   0.716044800662482F,   0.714676996546934F,   0.713306569597477F,   
	0.711933504667742F,   0.710557786465018F,   0.709179399548267F,   0.707798328326094F,   0.706414557054699F,   0.705028069835776F,   0.703638850614386F,   
	0.702246883176783F,   0.700852151148215F,   0.699454637990666F,   0.698054327000576F,   0.696651201306508F,   0.695245243866777F,   0.693836437467035F,   
	0.692424764717814F,   0.691010208052019F,   0.689592749722376F,   0.688172371798840F,   0.686749056165943F,   0.685322784520103F,   0.683893538366873F,   
	0.682461299018145F,   0.681026047589303F,   0.679587764996311F,   0.678146431952756F,   0.676702028966833F,   0.675254536338262F,   0.673803934155163F,   
	0.672350202290851F,   0.670893320400585F,   0.669433267918241F,   0.667970024052927F,   0.666503567785531F,   0.665033877865192F,   0.663560932805713F,   
	0.662084710881894F,   0.660605190125793F,   0.659122348322911F,   0.657636163008302F,   0.656146611462602F,   0.654653670707977F,   0.653157317503985F,   
	0.651657528343359F,   0.650154279447693F,   0.648647546763049F,   0.647137305955464F,   0.645623532406362F,   0.644106201207877F,   0.642585287158067F,   
	0.641060764756032F,   0.639532608196926F,   0.638000791366857F,   0.636465287837687F,   0.634926070861705F,   0.633383113366196F,   0.631836387947884F,   
	0.630285866867252F,   0.628731522042737F,   0.627173325044799F,   0.625611247089854F,   0.624045259034067F,   0.622475331367011F,   0.620901434205175F,   
	0.619323537285332F,   0.617741609957748F,   0.616155621179230F,   0.614565539506029F,   0.612971333086556F,   0.611372969653945F,   0.609770416518428F,   
	0.608163640559537F,   0.606552608218119F,   0.604937285488155F,   0.603317637908383F,   0.601693630553726F,   0.600065228026501F,   0.598432394447418F,   
	0.596795093446355F,   0.595153288152907F,   0.593506941186698F,   0.591856014647451F,   0.590200470104809F,   0.588540268587894F,   0.586875370574609F,   
	0.585205735980653F,   0.583531324148268F,   0.581852093834683F,   0.580168003200261F,   0.578479009796338F,   0.576785070552736F,   0.575086141764952F,   
	0.573382179080996F,   0.571673137487887F,   0.569958971297775F,   0.568239634133691F,   0.566515078914908F,   0.564785257841897F,   0.563050122380869F,   
	0.561309623247887F,   0.559563710392533F,   0.557812332981113F,   0.556055439379389F,   0.554292977134817F,   0.552524892958274F,   0.550751132705259F,   
	0.548971641356545F,   0.547186362998268F,   0.545395240801426F,   0.543598217000772F,   0.541795232873077F,   0.539986228714738F,   0.538171143818710F,   
	0.536349916450737F,   0.534522483824849F,   0.532688782078109F,   0.530848746244571F,   0.529002310228420F,   0.527149406776276F,   0.525289967448601F,   
	0.523423922590214F,   0.521551201299834F,   0.519671731398652F,   0.517785439397871F,   0.515892250465172F,   0.513992088390077F,   0.512084875548152F,   
	0.510170532864002F,   0.508248979773017F,   0.506320134181810F,   0.504383912427290F,   0.502440229234317F,   0.500488997671884F,   0.498530129107740F,   
	0.496563533161421F,   0.494589117655582F,   0.492606788565586F,   0.490616449967257F,   0.488618003982709F,   0.486611350724190F,   0.484596388235812F,   
	0.482573012433111F,   0.480541117040301F,   0.478500593525143F,   0.476451331031289F,   0.474393216308012F,   0.472326133637166F,   0.470249964757263F,   
	0.468164588784522F,   0.466069882130732F,   0.463965718417781F,   0.461851968388683F,   0.459728499814917F,   0.457595177399902F,   0.455451862678397F,   
	0.453298413911625F,   0.451134685977888F,   0.448960530258442F,   0.446775794518363F,   0.444580322782158F,   0.442373955203809F,   0.440156527930957F,   
	0.437927872962898F,   0.435687818002043F,   0.433436186298462F,   0.431172796487126F,   0.428897462417420F,   0.426609992974468F,   0.424310191891791F,   
	0.421997857554777F,   0.419672782794400F,   0.417334754670599F,   0.414983554244674F,   0.412618956340006F,   0.410240729290363F,   0.407848634675001F,   
	0.405442427039692F,   0.403021853602766F,   0.400586653945164F,   0.398136559683428F,   0.395671294124465F,   0.393190571900831F,   0.390694098585167F,   
	0.388181570282322F,   0.385652673197558F,   0.383107083179098F,   0.380544465233131F,   0.377964473009227F,   0.375366748253913F,   0.372750920229970F,   
	0.370116605098803F,   0.367463405262941F,   0.364790908665512F,   0.362098688043168F,   0.359386300128645F,   0.356653284798738F,   0.353899164163047F,   
	0.351123441588392F,   0.348325600653254F,   0.345505104026009F,   0.342661392260052F,   0.339793882498156F,   0.336901967077581F,   0.333985012026464F,   
	0.331042355440947F,   0.328073305731301F,   0.325077139723846F,   0.322053100603939F,   0.319000395683429F,   0.315918193973942F,   0.312805623544927F,   
	0.309661768642666F,   0.306485666543278F,   0.303276304109060F,   0.300032614013251F,   0.296753470593349F,   0.293437685287304F,   0.290084001600130F,   
	0.286691089540498F,   0.283257539457454F,   0.279781855196266F,   0.276262446479137F,   0.272697620400713F,   0.269085571909355F,   0.265424373122285F,   
	0.261711961295107F,   0.257946125232586F,   0.254124489886509F,   0.250244498835942F,   0.246303394282793F,   0.242298194117906F,   0.238225665515645F,   
	0.234082294392261F,   0.229864249907459F,   0.225567342988944F,   0.221186977601905F,   0.216718093149231F,   0.212155095945896F,   0.207491777122337F,   
	0.202721213519846F,   0.197835647062233F,   0.192826336598779F,   0.187683374126956F,   0.182395454332756F,   0.176949582081524F,   0.171330696130026F,   
	0.165521177720474F,   0.159500197841714F,   0.153242833271639F,   0.146718842643652F,   0.139890927598133F,   0.132712186561143F,   0.125122249417971F,   
	0.117041147196131F,   0.108359046574615F,   0.0989178235311166F,  0.0884747910407618F,  0.0766214166358199F,  0.0625611247089854F,  0.0442373955203815F,   
	0.0F
};

const TTFloat32 kTTLookupHalfPaddedwWelch[] = {		// 256 point window table
	0.000000F, 0.000000F, 0.000000F, 0.000000F, 0.000000F, 0.000000F,	0.000000F, 0.000000F, 0.000000F, 0.000000F,
	0.000000F, 0.000000F, 0.000000F, 0.000000F, 0.000000F, 0.000000F, 0.000000F, 0.006989F, 0.014008F, 0.021027F,
	0.028046F, 0.035034F, 0.042053F, 0.049042F, 0.056061F, 0.063049F, 0.070038F, 0.077057F, 0.084045F, 0.091034F,
	0.097992F, 0.104980F, 0.111938F, 0.118927F, 0.125885F, 0.132812F, 0.139771F, 0.146698F, 0.153656F, 0.160583F,
	0.167480F, 0.174408F, 0.181305F, 0.188202F, 0.195068F, 0.201935F, 0.208801F, 0.215668F, 0.222504F, 0.229340F,
	0.236145F, 0.242950F, 0.249756F, 0.256531F, 0.263306F, 0.270081F, 0.276825F, 0.283539F, 0.290253F, 0.296967F,
	0.303650F, 0.310333F, 0.316986F, 0.323639F, 0.330261F, 0.336853F, 0.343445F, 0.350037F, 0.356598F, 0.363129F,
	0.369659F, 0.376160F, 0.382660F, 0.389130F, 0.395569F, 0.402008F, 0.408417F, 0.414795F, 0.421173F, 0.427521F,
	0.433868F, 0.440155F, 0.446442F, 0.452698F, 0.458954F, 0.465179F, 0.471375F, 0.477539F, 0.483704F, 0.489807F,
	0.495911F, 0.501984F, 0.508057F, 0.514069F, 0.520081F, 0.526062F, 0.532013F, 0.537933F, 0.543823F, 0.549683F,
	0.555542F, 0.561340F, 0.567139F, 0.572906F, 0.578644F, 0.584351F, 0.590027F, 0.595673F, 0.601288F, 0.606873F,
	0.612427F, 0.617950F, 0.623444F, 0.628937F, 0.634369F, 0.639771F, 0.645142F, 0.650482F, 0.655792F, 0.661072F,
	0.666321F, 0.671509F, 0.676697F, 0.681854F, 0.686951F, 0.692047F, 0.697083F, 0.702087F, 0.707062F, 0.712006F,
	0.716919F, 0.721802F, 0.726624F, 0.731415F, 0.736176F, 0.740906F, 0.745605F, 0.750244F, 0.754883F, 0.759460F,
	0.764008F, 0.768494F, 0.772980F, 0.777405F, 0.781799F, 0.786133F, 0.790466F, 0.794739F, 0.798981F, 0.803162F,
	0.807312F, 0.811432F, 0.815521F, 0.819550F, 0.823547F, 0.827515F, 0.831421F, 0.835297F, 0.839142F, 0.842926F,
	0.846680F, 0.850403F, 0.854065F, 0.857697F, 0.861267F, 0.864807F, 0.868317F, 0.871765F, 0.875183F, 0.878540F,
	0.881866F, 0.885162F, 0.888397F, 0.891602F, 0.894745F, 0.897858F, 0.900940F, 0.903961F, 0.906921F, 0.909851F,
	0.912750F, 0.915588F, 0.918365F, 0.921143F, 0.923828F, 0.926483F, 0.929108F, 0.931671F, 0.934204F, 0.936676F,
	0.939117F, 0.941498F, 0.943848F, 0.946136F, 0.948364F, 0.950592F, 0.952728F, 0.954834F, 0.956909F, 0.958893F,
	0.960876F, 0.962799F, 0.964661F, 0.966492F, 0.968262F, 0.970001F, 0.971680F, 0.973297F, 0.974884F, 0.976410F,
	0.977905F, 0.979340F, 0.980743F, 0.982086F, 0.983368F, 0.984619F, 0.985840F, 0.986969F, 0.988068F, 0.989136F,
	0.990143F, 0.991089F, 0.992004F, 0.992859F, 0.993652F, 0.994415F, 0.995148F, 0.995789F, 0.996429F, 0.996979F,
	0.997498F, 0.997955F, 0.998383F, 0.998749F, 0.999084F, 0.999329F, 0.999573F, 0.999725F, 0.999847F, 0.999939F,
	0.999969F, 0.999969F, 0.999969F, 0.999969F, 0.999969F, 0.999969F, 0.999969F, 0.999969F, 0.999969F, 0.999969F,
	0.999969F, 0.999969F, 0.999969F, 0.999969F, 0.999969F, 0.999969F
};
	
const TTFloat32 kTTLookupQuarterSine[] = {		// 128 point quarter sine wave table
	0.000000F, 0.012272F, 0.024541F, 0.036807F, 0.049068F, 0.061321F, 0.073565F, 0.085797F, 
	0.098017F, 0.110222F, 0.122411F, 0.134581F, 0.146730F, 0.158858F, 0.170962F, 0.183040F, 
	0.195090F, 0.207111F, 0.219101F, 0.231058F, 0.242980F, 0.254866F, 0.266713F, 0.278520F, 
	0.290285F, 0.302006F, 0.313682F, 0.325310F, 0.336890F, 0.348419F, 0.359895F, 0.371317F, 
	0.382683F, 0.393992F, 0.405241F, 0.416430F, 0.427555F, 0.438616F, 0.449611F, 0.460539F, 
	0.471397F, 0.482184F, 0.492898F, 0.503538F, 0.514103F, 0.524590F, 0.534998F, 0.545325F, 
	0.555570F, 0.565732F, 0.575808F, 0.585798F, 0.595699F, 0.605511F, 0.615232F, 0.624859F, 
	0.634393F, 0.643832F, 0.653173F, 0.662416F, 0.671559F, 0.680601F, 0.689541F, 0.698376F, 
	0.707107F, 0.715731F, 0.724247F, 0.732654F, 0.740951F, 0.749136F, 0.757209F, 0.765167F, 
	0.773010F, 0.780737F, 0.788346F, 0.795837F, 0.803208F, 0.810457F, 0.817585F, 0.824589F, 
	0.831470F, 0.838225F, 0.844854F, 0.851355F, 0.857729F, 0.863973F, 0.870087F, 0.876070F, 
	0.881921F, 0.887640F, 0.893224F, 0.898674F, 0.903989F, 0.909168F, 0.914210F, 0.919114F, 
	0.923880F, 0.928506F, 0.932993F, 0.937339F, 0.941544F, 0.945607F, 0.949528F, 0.953306F, 
	0.956940F, 0.960431F, 0.963776F, 0.966976F, 0.970031F, 0.972940F, 0.975702F, 0.978317F, 
	0.980785F, 0.983105F, 0.985278F, 0.987301F, 0.989177F, 0.990903F, 0.992480F, 0.993907F, 
	0.995185F, 0.996313F, 0.997290F, 0.998118F, 0.998795F, 0.999322F, 0.999699F, 0.999925F 
}; 


/****************************************************************************************************/

TTBase::TTBase()
{
	;
}


TTBase::~TTBase()
{
	;
}


TTDataInfoPtr	ttDataTypeInfo[kNumTTDataTypes];

void TTDataInfo::addDataInfoForType(TTDataType type)
{
	ttDataTypeInfo[type] = new TTDataInfo;
	
	if (type == kTypeNone) {
		ttDataTypeInfo[type]->name = TT("none");
		ttDataTypeInfo[type]->isNumerical = NO;
		ttDataTypeInfo[type]->bitdepth = 0;
	}
	
	else if (type == kTypeFloat32) {
		ttDataTypeInfo[type]->name = TT("float32");
		ttDataTypeInfo[type]->isNumerical = YES;
		ttDataTypeInfo[type]->bitdepth = 32;
	}
	else if (type == kTypeFloat64) {
		ttDataTypeInfo[type]->name = TT("float64");
		ttDataTypeInfo[type]->isNumerical = YES;
		ttDataTypeInfo[type]->bitdepth = 64;
	}
	else if (type == kTypeInt8) {
		ttDataTypeInfo[type]->name = TT("int8");
		ttDataTypeInfo[type]->isNumerical = YES;
		ttDataTypeInfo[type]->bitdepth = 8;
	}
	else if (type == kTypeUInt8) {
		ttDataTypeInfo[type]->name = TT("uint8");
		ttDataTypeInfo[type]->isNumerical = YES;
		ttDataTypeInfo[type]->bitdepth = 8;
	}
	else if (type == kTypeInt16) {
		ttDataTypeInfo[type]->name = TT("int16");
		ttDataTypeInfo[type]->isNumerical = YES;
		ttDataTypeInfo[type]->bitdepth = 16;
	}
	else if (type == kTypeUInt16) {
		ttDataTypeInfo[type]->name = TT("uint16");
		ttDataTypeInfo[type]->isNumerical = YES;
		ttDataTypeInfo[type]->bitdepth = 16;
	}
	else if (type == kTypeInt32) {
		ttDataTypeInfo[type]->name = TT("int32");
		ttDataTypeInfo[type]->isNumerical = YES;
		ttDataTypeInfo[type]->bitdepth = 32;
	}
	else if (type == kTypeUInt32) {
		ttDataTypeInfo[type]->name = TT("uint32");
		ttDataTypeInfo[type]->isNumerical = YES;
		ttDataTypeInfo[type]->bitdepth = 32;
	}
	else if (type == kTypeInt64) {
		ttDataTypeInfo[type]->name = TT("int64");
		ttDataTypeInfo[type]->isNumerical = YES;
		ttDataTypeInfo[type]->bitdepth = 64;
	}
	else if (type == kTypeUInt64) {
		ttDataTypeInfo[type]->name = TT("uint64");
		ttDataTypeInfo[type]->isNumerical = YES;
		ttDataTypeInfo[type]->bitdepth = 64;
	}
	
	else if (type == kTypeBoolean) {
		ttDataTypeInfo[type]->name = TT("boolean");
		ttDataTypeInfo[type]->isNumerical = NO;
		ttDataTypeInfo[type]->bitdepth = 1;
	}
	else if (type == kTypeSymbol) {
		ttDataTypeInfo[type]->name = TT("symbol");
		ttDataTypeInfo[type]->isNumerical = NO;
		ttDataTypeInfo[type]->bitdepth = -1;
	}
	else if (type == kTypeObject) {
		ttDataTypeInfo[type]->name = TT("object");
		ttDataTypeInfo[type]->isNumerical = NO;
		ttDataTypeInfo[type]->bitdepth = -1;
	}
	else if (type == kTypePointer) {
		ttDataTypeInfo[type]->name = TT("pointer");
		ttDataTypeInfo[type]->isNumerical = NO;
		ttDataTypeInfo[type]->bitdepth = sizeof(void*);
	}
	else if (type == kTypeString) {
		ttDataTypeInfo[type]->name = TT("string");
		ttDataTypeInfo[type]->isNumerical = NO;
		ttDataTypeInfo[type]->bitdepth = -1;
	}
	else if (type == kTypeLocalValue) {
		ttDataTypeInfo[type]->name = TT("value");
		ttDataTypeInfo[type]->isNumerical = NO;
		ttDataTypeInfo[type]->bitdepth = -1;
	}	
}



void TTLogMessage(TTImmutableCString message, ...)
{
	char	str[4096];
	va_list	ap;
	
	va_start(ap, message);
	vsnprintf(str, 4096, message, ap);
	va_end(ap);
	str[4095] = 0;
#ifdef TT_PLATFORM_WIN
	OutputDebugString(str);
#else
	// we fail to compile on linux with the current settings if we use fprintf()
	// fprintf(stderr, str);
	cerr << str;
#endif
}


void TTLogWarning(TTImmutableCString message, ...)
{
	char	str[4096];
	va_list	ap;
	
	va_start(ap, message);
	vsnprintf(str, 4096, message, ap);
	va_end(ap);
	str[4095] = 0;
#ifdef TT_PLATFORM_WIN
	OutputDebugString(str);
#else
	// we fail to compile on linux with the current settings if we use fprintf()
	// fprintf(stderr, str);
	cerr << str;
#endif
}


void TTLogError(TTImmutableCString message, ...)
{
	char	str[4096];
	va_list	ap;
	
	va_start(ap, message);
	vsnprintf(str, 4096, message, ap);
	va_end(ap);
	str[4095] = 0;
#ifdef TT_PLATFORM_WIN
	OutputDebugString(str);
#else
	// we fail to compile on linux with the current settings if we use fprintf()
	// fprintf(stderr, str);
	cerr << str;
#endif
}


void TTLogDebug(TTImmutableCString message, ...)
{
	if (ttEnvironment->mDebugBasic) {
		char	str[4096];
		va_list	ap;
		
		va_start(ap, message);
		vsnprintf(str, 4096, message, ap);
		va_end(ap);
		str[4095] = 0;
#ifdef TT_PLATFORM_WIN
		OutputDebugString(str);
#else
	// we fail to compile on linux with the current settings if we use fprintf()
	// fprintf(stderr, str);
	cerr << str;
#endif
	}
}


#include "MersenneTwister.h"

TTFloat64 TTRandom64()
{
	MTRand twister;
	return twister.rand();
}
